{"ast":null,"code":"var _jsxFileName = \"F:\\\\ibs-admin-front\\\\ibs-school-admin\\\\src\\\\components\\\\WaitingList\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Button, Form, Input, PhoneNumberFormat, Title } from \"../Input/styles\";\nimport { ContactBox, Course, Date, FullName, FullNameBox, PhoneNumber, TableRow, TableWrapper, Telegram } from \"./styles\";\nimport { whichMonth } from \"../../util/whichMonth\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loading from \"../Loading\";\nimport ErrorBox from \"../ErrorBox\";\nimport NumberFormat from \"react-number-format\";\nimport axios from \"axios\";\nimport { link } from \"../../baseLink/link\";\nimport { getWaitingList } from \"../../redux/modules/waitingList/waitingListAction\";\nimport { getTestedStudents } from \"../../redux/modules/testedStudents/testedStudentsAction\";\nimport { ReactComponent as DeleteIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/bin.svg\";\nimport { ReactComponent as Bin } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/bin.svg\";\nimport { DeleteBox } from \"../Table/styles\";\nimport { ActionsBox, Delete, DeletionBackground, DeletionPage, DeletionText, Edit } from \"../TeachersList/styles\";\nimport { ReactComponent as ArrowIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/arrow.svg\";\nimport { httpRequest } from \"../../util/httpRequest\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst WaitingList = ({\n  waitData\n}) => {\n  _s();\n\n  var _deletionData$data, _deletionData$data2;\n\n  const [submissionProcess, setSubmissionProcess] = useState({\n    loading: false,\n    error: false,\n    success: false\n  });\n  const dispatch = useDispatch();\n\n  const submitList = e => {\n    e.preventDefault();\n    setSubmissionProcess({\n      loading: true,\n      error: false,\n      success: false\n    });\n    const {\n      fullName,\n      subject,\n      date,\n      telegram,\n      phoneNumber\n    } = e.target;\n    const form = {\n      fullName: fullName.value,\n      subject: subject.value,\n      date: date.value,\n      telegram: telegram.value,\n      phoneNumber: phoneNumber.value\n    };\n    axios(httpRequest(\"waiting-list\", \"POST\", form)) // .post(`${link}/waiting-list`, form)\n    .then(res => {\n      setSubmissionProcess({\n        loading: false,\n        error: false,\n        success: true\n      });\n      console.log(res);\n      dispatch(getWaitingList());\n    }).catch(err => {\n      setSubmissionProcess({\n        loading: false,\n        error: true,\n        success: false\n      });\n    }).finally(() => {\n      setTimeout(() => setSubmissionProcess({\n        loading: false,\n        error: false,\n        success: false\n      }), 5000);\n    });\n  };\n\n  const list = useSelector(state => state.waitingListReducer);\n  const {\n    loading,\n    error,\n    waitingList\n  } = list;\n\n  const handleDelete = id => {\n    axios(httpRequest(`waiting-list/${id}`, \"DELETE\")) // .delete(`${link}/waiting-list/${id}`)\n    .then(() => {\n      setDeletionData({\n        popUp: false,\n        data: {}\n      });\n      dispatch(getWaitingList());\n    });\n  };\n\n  const [deletionData, setDeletionData] = useState({\n    popUp: false,\n    data: {}\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: submitList,\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: \"Waiting List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          placeholder: \"fullName\",\n          name: \"fullName\",\n          defaultValue: (waitData === null || waitData === void 0 ? void 0 : waitData.name) && waitData.name,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          placeholder: \"subject\",\n          name: \"subject\",\n          defaultValue: (waitData === null || waitData === void 0 ? void 0 : waitData.course) && waitData.course,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"date\",\n          placeholder: \"date\",\n          name: \"date\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          placeholder: \"telegram\",\n          name: \"telegram\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(PhoneNumberFormat, {\n          name: \"phoneNumber\",\n          format: \"+998 (##) ###-##-##\",\n          mask: \"_\",\n          id: \"hero-form-phone-number\",\n          className: \"number-format\",\n          placeholder: \"phone number\" // onChange={(e)=>setPhoneNumber(e.target.value)}\n          // value={phoneNumber}\n          ,\n          defaultValue: (waitData === null || waitData === void 0 ? void 0 : waitData.phone) && waitData.phone,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: submissionProcess.loading || submissionProcess.error || submissionProcess.success,\n          loading: submissionProcess.loading,\n          error: submissionProcess.error,\n          success: submissionProcess.success,\n          children: submissionProcess.loading ? \"loading...\" : submissionProcess.error ? \"error\" : submissionProcess.success ? \"success\" : \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }, this), error && /*#__PURE__*/_jsxDEV(ErrorBox, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(TableWrapper, {\n        children: !loading && !error && waitingList.map(({\n          id,\n          fullName,\n          subject,\n          phoneNumber,\n          telegram,\n          date\n        }) => /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(DeleteBox, {\n            onClick: () => {\n              setDeletionData({\n                popUp: true,\n                data: {\n                  id,\n                  fullName,\n                  phoneNumber\n                }\n              }); // handleDelete(id)\n            },\n            className: \"bin\",\n            children: /*#__PURE__*/_jsxDEV(Bin, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(FullNameBox, {\n            children: [/*#__PURE__*/_jsxDEV(FullName, {\n              children: fullName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Course, {\n              children: subject\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(ContactBox, {\n            children: [/*#__PURE__*/_jsxDEV(PhoneNumber, {\n              children: phoneNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Telegram, {\n              children: telegram\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Date, {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), deletionData.popUp && /*#__PURE__*/_jsxDEV(DeletionBackground, {\n      children: /*#__PURE__*/_jsxDEV(DeletionPage, {\n        children: [/*#__PURE__*/_jsxDEV(DeletionText, {\n          children: [(_deletionData$data = deletionData.data) === null || _deletionData$data === void 0 ? void 0 : _deletionData$data.fullName, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: (_deletionData$data2 = deletionData.data) === null || _deletionData$data2 === void 0 ? void 0 : _deletionData$data2.phoneNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DeletionText, {\n          children: \"Do you really want to delete me \\uD83D\\uDE2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ActionsBox, {\n          children: [/*#__PURE__*/_jsxDEV(Edit, {\n            bgColor: \"green\",\n            onClick: () => {\n              setDeletionData({\n                popUp: false,\n                data: {}\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(ArrowIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Delete, {\n            bgColor: \"red\",\n            onClick: () => {\n              var _deletionData$data3;\n\n              return handleDelete((_deletionData$data3 = deletionData.data) === null || _deletionData$data3 === void 0 ? void 0 : _deletionData$data3.id);\n            },\n            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(WaitingList, \"l4Fw3J++oDNV0DFp98TIhqGWFhU=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = WaitingList;\nexport default WaitingList;\n\nvar _c;\n\n$RefreshReg$(_c, \"WaitingList\");","map":{"version":3,"sources":["F:/ibs-admin-front/ibs-school-admin/src/components/WaitingList/index.jsx"],"names":["React","useState","Button","Form","Input","PhoneNumberFormat","Title","ContactBox","Course","Date","FullName","FullNameBox","PhoneNumber","TableRow","TableWrapper","Telegram","whichMonth","useDispatch","useSelector","Loading","ErrorBox","NumberFormat","axios","link","getWaitingList","getTestedStudents","DeleteBox","ActionsBox","Delete","DeletionBackground","DeletionPage","DeletionText","Edit","httpRequest","WaitingList","waitData","submissionProcess","setSubmissionProcess","loading","error","success","dispatch","submitList","e","preventDefault","fullName","subject","date","telegram","phoneNumber","target","form","value","then","res","console","log","catch","err","finally","setTimeout","list","state","waitingListReducer","waitingList","handleDelete","id","setDeletionData","popUp","data","deletionData","name","course","phone","map"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAAQC,MAAR,EAAgBC,IAAhB,EAAsBC,KAAtB,EAA6BC,iBAA7B,EAAgDC,KAAhD,QAA4D,iBAA5D;AACA,SAAQC,UAAR,EAAoBC,MAApB,EAA4BC,IAA5B,EAAkCC,QAAlC,EAA4CC,WAA5C,EAAyDC,WAAzD,EAAsEC,QAAtE,EAAgFC,YAAhF,EAA8FC,QAA9F,QAA6G,UAA7G;AACA,SAAQC,UAAR,QAAyB,uBAAzB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,QAAmB,qBAAnB;AACA,SAAQC,cAAR,QAA6B,mDAA7B;AACA,SAAQC,iBAAR,QAAgC,yDAAhC;;;AAEA,SAAQC,SAAR,QAAwB,iBAAxB;AACA,SAAQC,UAAR,EAAoBC,MAApB,EAA4BC,kBAA5B,EAAgDC,YAAhD,EAA8DC,YAA9D,EAA4EC,IAA5E,QAAuF,wBAAvF;;AAEA,SAAQC,WAAR,QAA0B,wBAA1B;;;;AAEA,MAAMC,WAAW,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAAA;;AAAA;;AAEhC,QAAM,CAACC,iBAAD,EAAoBC,oBAApB,IAA4CpC,QAAQ,CAAC;AAACqC,IAAAA,OAAO,EAAE,KAAV;AAAiBC,IAAAA,KAAK,EAAE,KAAxB;AAA+BC,IAAAA,OAAO,EAAE;AAAxC,GAAD,CAA1D;AAEA,QAAMC,QAAQ,GAAGxB,WAAW,EAA5B;;AAEA,QAAMyB,UAAU,GAAIC,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACC,cAAF;AACAP,IAAAA,oBAAoB,CAAC;AAACC,MAAAA,OAAO,EAAE,IAAV;AAAgBC,MAAAA,KAAK,EAAE,KAAvB;AAA8BC,MAAAA,OAAO,EAAE;AAAvC,KAAD,CAApB;AACA,UAAM;AAACK,MAAAA,QAAD;AAAWC,MAAAA,OAAX;AAAoBC,MAAAA,IAApB;AAA0BC,MAAAA,QAA1B;AAAoCC,MAAAA;AAApC,QAAmDN,CAAC,CAACO,MAA3D;AAEA,UAAMC,IAAI,GAAG;AACTN,MAAAA,QAAQ,EAAEA,QAAQ,CAACO,KADV;AAETN,MAAAA,OAAO,EAAEA,OAAO,CAACM,KAFR;AAGTL,MAAAA,IAAI,EAAEA,IAAI,CAACK,KAHF;AAITJ,MAAAA,QAAQ,EAAEA,QAAQ,CAACI,KAJV;AAKTH,MAAAA,WAAW,EAAEA,WAAW,CAACG;AALhB,KAAb;AAQA9B,IAAAA,KAAK,CAACW,WAAW,CAAC,cAAD,EAAiB,MAAjB,EAAyBkB,IAAzB,CAAZ,CAAL,CACI;AADJ,KAEKE,IAFL,CAEUC,GAAG,IAAI;AACTjB,MAAAA,oBAAoB,CAAC;AAACC,QAAAA,OAAO,EAAE,KAAV;AAAiBC,QAAAA,KAAK,EAAE,KAAxB;AAA+BC,QAAAA,OAAO,EAAE;AAAxC,OAAD,CAApB;AACAe,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAb,MAAAA,QAAQ,CAACjB,cAAc,EAAf,CAAR;AAEH,KAPL,EAQKiC,KARL,CAQWC,GAAG,IAAI;AACVrB,MAAAA,oBAAoB,CAAC;AAACC,QAAAA,OAAO,EAAE,KAAV;AAAiBC,QAAAA,KAAK,EAAE,IAAxB;AAA8BC,QAAAA,OAAO,EAAE;AAAvC,OAAD,CAApB;AACH,KAVL,EAWKmB,OAXL,CAWa,MAAM;AACXC,MAAAA,UAAU,CAAC,MAAMvB,oBAAoB,CAAC;AAACC,QAAAA,OAAO,EAAE,KAAV;AAAiBC,QAAAA,KAAK,EAAE,KAAxB;AAA+BC,QAAAA,OAAO,EAAE;AAAxC,OAAD,CAA3B,EAA6E,IAA7E,CAAV;AACH,KAbL;AAcH,GA3BD;;AA6BA,QAAMqB,IAAI,GAAG3C,WAAW,CAAC4C,KAAK,IAAIA,KAAK,CAACC,kBAAhB,CAAxB;AAEA,QAAM;AAACzB,IAAAA,OAAD;AAAUC,IAAAA,KAAV;AAAiByB,IAAAA;AAAjB,MAAgCH,IAAtC;;AAEA,QAAMI,YAAY,GAAIC,EAAD,IAAQ;AACzB5C,IAAAA,KAAK,CAACW,WAAW,CAAE,gBAAeiC,EAAG,EAApB,EAAsB,QAAtB,CAAZ,CAAL,CACI;AADJ,KAEKb,IAFL,CAEU,MAAM;AACJc,MAAAA,eAAe,CAAC;AAACC,QAAAA,KAAK,EAAE,KAAR;AAAeC,QAAAA,IAAI,EAAE;AAArB,OAAD,CAAf;AACA5B,MAAAA,QAAQ,CAACjB,cAAc,EAAf,CAAR;AACH,KALT;AAOH,GARD;;AAUA,QAAM,CAAC8C,YAAD,EAAeH,eAAf,IAAkClE,QAAQ,CAAC;AAACmE,IAAAA,KAAK,EAAE,KAAR;AAAeC,IAAAA,IAAI,EAAE;AAArB,GAAD,CAAhD;AAEA,sBACI;AAAA,4BACI;AAAA,8BACI,QAAC,IAAD;AAAM,QAAA,QAAQ,EAAE3B,UAAhB;AAAA,gCACI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAE,MAAb;AAAqB,UAAA,WAAW,EAAE,UAAlC;AAA8C,UAAA,IAAI,EAAE,UAApD;AACO,UAAA,YAAY,EAAE,CAAAP,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEoC,IAAV,KAAkBpC,QAAQ,CAACoC,IADhD;AAEO,UAAA,QAAQ;AAFf;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAKI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAE,MAAb;AAAqB,UAAA,WAAW,EAAE,SAAlC;AAA6C,UAAA,IAAI,EAAE,SAAnD;AACO,UAAA,YAAY,EAAE,CAAApC,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEqC,MAAV,KAAoBrC,QAAQ,CAACqC,MADlD;AAEO,UAAA,QAAQ;AAFf;AAAA;AAAA;AAAA;AAAA,gBALJ,eAQI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAE,MAAb;AAAqB,UAAA,WAAW,EAAE,MAAlC;AAA0C,UAAA,IAAI,EAAE,MAAhD;AAAwD,UAAA,QAAQ;AAAhE;AAAA;AAAA;AAAA;AAAA,gBARJ,eASI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAE,MAAb;AAAqB,UAAA,WAAW,EAAE,UAAlC;AAA8C,UAAA,IAAI,EAAE,UAApD;AAAgE,UAAA,QAAQ;AAAxE;AAAA;AAAA;AAAA;AAAA,gBATJ,eAUI,QAAC,iBAAD;AACI,UAAA,IAAI,EAAC,aADT;AAEI,UAAA,MAAM,EAAC,qBAFX;AAGI,UAAA,IAAI,EAAC,GAHT;AAII,UAAA,EAAE,EAAE,wBAJR;AAKI,UAAA,SAAS,EAAC,eALd;AAMI,UAAA,WAAW,EAAC,cANhB,CAOI;AACA;AARJ;AASI,UAAA,YAAY,EAAE,CAAArC,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEsC,KAAV,KAAmBtC,QAAQ,CAACsC,KAT9C;AAUI,UAAA,QAAQ;AAVZ;AAAA;AAAA;AAAA;AAAA,gBAVJ,eAuBI,QAAC,MAAD;AAAQ,UAAA,QAAQ,EAAErC,iBAAiB,CAACE,OAAlB,IAA6BF,iBAAiB,CAACG,KAA/C,IAAwDH,iBAAiB,CAACI,OAA5F;AACQ,UAAA,OAAO,EAAEJ,iBAAiB,CAACE,OADnC;AAC4C,UAAA,KAAK,EAAEF,iBAAiB,CAACG,KADrE;AAEQ,UAAA,OAAO,EAAEH,iBAAiB,CAACI,OAFnC;AAAA,oBAIQJ,iBAAiB,CAACE,OAAlB,GAA4B,YAA5B,GACIF,iBAAiB,CAACG,KAAlB,GAA0B,OAA1B,GACIH,iBAAiB,CAACI,OAAlB,GAA4B,SAA5B,GAAwC;AANxD;AAAA;AAAA;AAAA;AAAA,gBAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAoCKF,OAAO,iBAAI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cApChB,EAqCKC,KAAK,iBAAI,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cArCd,eAsCI,QAAC,YAAD;AAAA,kBACM,CAACD,OAAD,IAAY,CAACC,KAAd,IACDyB,WAAW,CAACU,GAAZ,CAAgB,CAAC;AAACR,UAAAA,EAAD;AAAKrB,UAAAA,QAAL;AAAeC,UAAAA,OAAf;AAAwBG,UAAAA,WAAxB;AAAqCD,UAAAA,QAArC;AAA+CD,UAAAA;AAA/C,SAAD,kBACZ,QAAC,QAAD;AAAA,kCACI,QAAC,SAAD;AAAW,YAAA,OAAO,EAAE,MAAM;AACtBoB,cAAAA,eAAe,CAAC;AAACC,gBAAAA,KAAK,EAAE,IAAR;AAAcC,gBAAAA,IAAI,EAAE;AAACH,kBAAAA,EAAD;AAAKrB,kBAAAA,QAAL;AAAeI,kBAAAA;AAAf;AAApB,eAAD,CAAf,CADsB,CAEtB;AACH,aAHD;AAGG,YAAA,SAAS,EAAE,KAHd;AAAA,mCAII,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAOI,QAAC,WAAD;AAAA,oCACI,QAAC,QAAD;AAAA,wBACKJ;AADL;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII,QAAC,MAAD;AAAA,wBACKC;AADL;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAeI,QAAC,UAAD;AAAA,oCACI,QAAC,WAAD;AAAA,wBACKG;AADL;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII,QAAC,QAAD;AAAA,wBACKD;AADL;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAfJ,eAuBI,QAAC,IAAD;AAAA,mCACI;AAAA,wBACKD;AADL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAvBJ;AAAA,WAAemB,EAAf;AAAA;AAAA;AAAA;AAAA,gBADJ;AAFJ;AAAA;AAAA;AAAA;AAAA,cAtCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EA0EKI,YAAY,CAACF,KAAb,iBACD,QAAC,kBAAD;AAAA,6BACI,QAAC,YAAD;AAAA,gCACI,QAAC,YAAD;AAAA,2CACKE,YAAY,CAACD,IADlB,uDACK,mBAAmBxB,QADxB,eAEI;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA,6CAAQyB,YAAY,CAACD,IAArB,wDAAQ,oBAAmBpB;AAA3B;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAMI,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,eAOI,QAAC,UAAD;AAAA,kCACI,QAAC,IAAD;AAAM,YAAA,OAAO,EAAE,OAAf;AAAwB,YAAA,OAAO,EAAE,MAAM;AACnCkB,cAAAA,eAAe,CAAC;AAACC,gBAAAA,KAAK,EAAE,KAAR;AAAeC,gBAAAA,IAAI,EAAE;AAArB,eAAD,CAAf;AACH,aAFD;AAAA,mCAGI,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAMI,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAE,KAAjB;AAAwB,YAAA,OAAO,EAAE;AAAA;;AAAA,qBAC7BJ,YAAY,wBAACK,YAAY,CAACD,IAAd,wDAAC,oBAAmBH,EAApB,CADiB;AAAA,aAAjC;AAAA,mCAGI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,kBANJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA3EJ;AAAA,kBADJ;AAoGH,CAvJD;;GAAMhC,W;UAIejB,W,EA+BJC,W;;;KAnCXgB,W;AAyJN,eAAeA,WAAf","sourcesContent":["import React, {useState} from 'react';\r\nimport {Button, Form, Input, PhoneNumberFormat, Title} from \"../Input/styles\";\r\nimport {ContactBox, Course, Date, FullName, FullNameBox, PhoneNumber, TableRow, TableWrapper, Telegram} from \"./styles\";\r\nimport {whichMonth} from \"../../util/whichMonth\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport Loading from \"../Loading\";\r\nimport ErrorBox from \"../ErrorBox\";\r\nimport NumberFormat from \"react-number-format\";\r\nimport axios from \"axios\";\r\nimport {link} from \"../../baseLink/link\";\r\nimport {getWaitingList} from \"../../redux/modules/waitingList/waitingListAction\";\r\nimport {getTestedStudents} from \"../../redux/modules/testedStudents/testedStudentsAction\";\r\nimport {ReactComponent as DeleteIcon, ReactComponent as Bin} from \"../../assets/icons/bin.svg\";\r\nimport {DeleteBox} from \"../Table/styles\";\r\nimport {ActionsBox, Delete, DeletionBackground, DeletionPage, DeletionText, Edit} from \"../TeachersList/styles\";\r\nimport {ReactComponent as ArrowIcon} from \"../../assets/icons/arrow.svg\";\r\nimport {httpRequest} from \"../../util/httpRequest\";\r\n\r\nconst WaitingList = ({waitData}) => {\r\n\r\n    const [submissionProcess, setSubmissionProcess] = useState({loading: false, error: false, success: false})\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const submitList = (e) => {\r\n        e.preventDefault()\r\n        setSubmissionProcess({loading: true, error: false, success: false})\r\n        const {fullName, subject, date, telegram, phoneNumber} = e.target\r\n\r\n        const form = {\r\n            fullName: fullName.value,\r\n            subject: subject.value,\r\n            date: date.value,\r\n            telegram: telegram.value,\r\n            phoneNumber: phoneNumber.value\r\n        }\r\n\r\n        axios(httpRequest(\"waiting-list\", \"POST\", form))\r\n            // .post(`${link}/waiting-list`, form)\r\n            .then(res => {\r\n                setSubmissionProcess({loading: false, error: false, success: true})\r\n                console.log(res)\r\n                dispatch(getWaitingList())\r\n\r\n            })\r\n            .catch(err => {\r\n                setSubmissionProcess({loading: false, error: true, success: false})\r\n            })\r\n            .finally(() => {\r\n                setTimeout(() => setSubmissionProcess({loading: false, error: false, success: false}), 5000)\r\n            })\r\n    }\r\n\r\n    const list = useSelector(state => state.waitingListReducer)\r\n\r\n    const {loading, error, waitingList} = list\r\n\r\n    const handleDelete = (id) => {\r\n        axios(httpRequest(`waiting-list/${id}`,\"DELETE\"))\r\n            // .delete(`${link}/waiting-list/${id}`)\r\n            .then(() => {\r\n                    setDeletionData({popUp: false, data: {}})\r\n                    dispatch(getWaitingList())\r\n                }\r\n            )\r\n    }\r\n\r\n    const [deletionData, setDeletionData] = useState({popUp: false, data: {}})\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <Form onSubmit={submitList}>\r\n                    <Title>Waiting List</Title>\r\n                    <Input type={\"text\"} placeholder={\"fullName\"} name={\"fullName\"}\r\n                           defaultValue={waitData?.name && waitData.name}\r\n                           required/>\r\n                    <Input type={\"text\"} placeholder={\"subject\"} name={\"subject\"}\r\n                           defaultValue={waitData?.course && waitData.course}\r\n                           required/>\r\n                    <Input type={\"date\"} placeholder={\"date\"} name={\"date\"} required/>\r\n                    <Input type={\"text\"} placeholder={\"telegram\"} name={\"telegram\"} required/>\r\n                    <PhoneNumberFormat\r\n                        name=\"phoneNumber\"\r\n                        format=\"+998 (##) ###-##-##\"\r\n                        mask=\"_\"\r\n                        id={\"hero-form-phone-number\"}\r\n                        className=\"number-format\"\r\n                        placeholder=\"phone number\"\r\n                        // onChange={(e)=>setPhoneNumber(e.target.value)}\r\n                        // value={phoneNumber}\r\n                        defaultValue={waitData?.phone && waitData.phone}\r\n                        required\r\n                    />\r\n                    {/*<Input type={\"tel\"} placeholder={\"phone number\"} defaultValue={waitData?.phone && waitData.phone} required/>*/}\r\n                    <Button disabled={submissionProcess.loading || submissionProcess.error || submissionProcess.success}\r\n                            loading={submissionProcess.loading} error={submissionProcess.error}\r\n                            success={submissionProcess.success}>\r\n                        {\r\n                            submissionProcess.loading ? \"loading...\" :\r\n                                submissionProcess.error ? \"error\" :\r\n                                    submissionProcess.success ? \"success\" : \"Submit\"\r\n                        }\r\n\r\n                    </Button>\r\n                </Form>\r\n\r\n                {loading && <Loading/>}\r\n                {error && <ErrorBox/>}\r\n                <TableWrapper>\r\n                    {(!loading && !error) &&\r\n                    waitingList.map(({id, fullName, subject, phoneNumber, telegram, date}) =>\r\n                        <TableRow key={id}>\r\n                            <DeleteBox onClick={() => {\r\n                                setDeletionData({popUp: true, data: {id, fullName, phoneNumber}})\r\n                                // handleDelete(id)\r\n                            }} className={\"bin\"}>\r\n                                <Bin/>\r\n                            </DeleteBox>\r\n                            <FullNameBox>\r\n                                <FullName>\r\n                                    {fullName}\r\n                                </FullName>\r\n                                <Course>\r\n                                    {subject}\r\n                                </Course>\r\n                            </FullNameBox>\r\n                            <ContactBox>\r\n                                <PhoneNumber>\r\n                                    {phoneNumber}\r\n                                </PhoneNumber>\r\n                                <Telegram>\r\n                                    {telegram}\r\n                                </Telegram>\r\n                            </ContactBox>\r\n                            <Date>\r\n                                <p>\r\n                                    {date}\r\n                                </p>\r\n                            </Date>\r\n                        </TableRow>\r\n                    )}\r\n                </TableWrapper>\r\n            </div>\r\n            {deletionData.popUp &&\r\n            <DeletionBackground>\r\n                <DeletionPage>\r\n                    <DeletionText>\r\n                        {deletionData.data?.fullName}\r\n                        <br/>\r\n                        <small>{deletionData.data?.phoneNumber}</small>\r\n                    </DeletionText>\r\n                    <DeletionText>Do you really want to delete me 😭</DeletionText>\r\n                    <ActionsBox>\r\n                        <Edit bgColor={\"green\"} onClick={() => {\r\n                            setDeletionData({popUp: false, data: {}})\r\n                        }}>\r\n                            <ArrowIcon/>\r\n                        </Edit>\r\n                        <Delete bgColor={\"red\"} onClick={() =>\r\n                            handleDelete(deletionData.data?.id)\r\n                        }>\r\n                            <DeleteIcon/>\r\n                        </Delete>\r\n                    </ActionsBox>\r\n                </DeletionPage>\r\n            </DeletionBackground>}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default WaitingList;"]},"metadata":{},"sourceType":"module"}